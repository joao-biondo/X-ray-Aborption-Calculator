<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-ray Absorption Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>X-ray Absorption Calculator</h1>
        
        <form id="calc-form">
            <label for="chemical_formula">Chemical Formula:</label>
            <input type="text" id="chemical_formula" name="chemical_formula" pattern="([A-Z][a-z]?\d*\.?\d*)+" required><br><br>
            
            <label for="wavelength">Wavelength/Energy :</label>
            <input type="text" id="wavelength" name="wavelength" pattern="^-?\d+(\.\d+)?$" required>
            <select name="type_energy" id="type_energy">
                <option value="wavelength">Wavelength (Å)</option>
                <option value="energy">Energy (keV)</option>
            </select><br><br>
            
            <label for="capillary_diameter">Capillary Diameter (mm):</label>
            <select name="capillary_diameter" id="capillary_diameter">
                <option value="1.00">1.00 mm - Kapton</option>
                <option value="0.30">0.30 mm - Kapton</option>
                <option value="0.50">0.50 mm - Kapton</option>
                <option value="0.70">0.70 mm - Kapton</option>
                <option value="1.12">1.12 mm - Kapton</option>
                <option value="1.37">1.37 mm - Kapton</option>
                <option value="1.57">1.57 mm - Kapton</option>
                <option value="0.80">0.80 mm (ID) - Quartzo</option>
                <option value="1.00">1.00 mm (ID) - Quartzo</option>
                <option value="1.50">1.50 mm (ID) - Quartzo</option>
                <option value="2.00">2.00 mm (ID) - Quartzo</option>
            </select>   
            
            <input type="submit" value="Calculate">
        </form>

        <h2>Results</h2>
        <p>Density (g/cm³): <span id="density"></span></p>
        <p>Transmission (%): <span id="transmission"></span></p>

        <div id="plot"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $('#calc-form').on('submit', function(event) {
            event.preventDefault();
            $.post('/calculate', $(this).serialize(), function(data) {
                $('#density').text(data.density);
                $('#transmission').text(data.transmission);
                $('#plot').html(data.plot);
            });
        });
    </script>
</body>
</html>